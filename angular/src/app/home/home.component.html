<mat-toolbar>
  <mat-toolbar-row class="search-row">
    <form class="search-form">
      <div class="centered-container">
        <mat-form-field class="search-bar" appearance="outline">
          <mat-icon matPrefix class="search-button" (click)="searchVehicle()">search</mat-icon>
          <mat-label>Search for cars</mat-label>
          <input 
            matInput
            name="searchInput"
            [(ngModel)]="searchText"
            (keyup.enter)="searchVehicle()">
        </mat-form-field>
        <mat-form-field class="location-field" appearance="outline">
          <mat-icon matPrefix>location_on</mat-icon>  
          <mat-label>Poland</mat-label>
          <mat-select placeholder="Poland" (selectionChange)="onSelected($event.value)">
            <mat-option *ngFor="let city of cities" [value]="city">
              {{city}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </form>
  </mat-toolbar-row>
</mat-toolbar>

<div class="car-container" *ngIf="vehicles.length || !isFetching; else spinner">
  <div *ngFor="let vehicle of vehicles; let i = index;">
    <div class="car-row" *ngIf="i % 3 === 0">
      <div 
        class="car-preview"
        *ngFor="let subVehicle of vehicles.slice(i, i + 3)"
        [routerLink]="['/vehicle_details', subVehicle.id]">
        <div class="car-image">
          <img src="{{subVehicle.images[0]}}" alt="Car Image">
        </div>
        <h2 class="car-title">{{ subVehicle.name }}</h2>
        <p class="car-description">{{ subVehicle.description }}</p>
        <button class="view-details-button">View Details</button>
      </div>
    </div>
  </div>
</div>
<ng-template #spinner>
  <div class="cust-spin">
    <mat-spinner diameter="100"></mat-spinner>
  </div>
</ng-template>